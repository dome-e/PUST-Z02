% !TEX encoding = cp1250
\chapter{Rysunki}
Wszystkie elementy dokumentu opracowanego w~systemie \LaTeX\ powinny wygl?da? jednolicie. Do wykonywania rysunków korzystamy wi?c z mechanizmów oferowanych przez dodatkowe pakiety \LaTeX a, nie do??czamy rysunków wykonanych jako?ciowo ró?nych, np. wykonanych w~programie Word. Nie u?ywamy rysunków zapisanych w~plikach bitmapowych, lecz w~plikach wektorowych (\verb+pdf+, ew. \verb+ps+ lub \verb+eps+). Jedynym wyj?tkiem s? zdj?cia.

\section{Schematy blokowe}
Do opracowania schematów blokowych najlepiej wykorzysta? j?zyk opisu rysunków \verb+TikZ/PGF+ \cite{litTantau2015}. Przy wykonywaniu prostych rysunków po prostu opisujemy je za pomoc? polece? dodaj?cych kolejne elementy, tzn. prostok?ty, okr?gi, linie. Na przyk?ad, ci?g polece?:
\begin{lstlisting}[style=customlatex,frame=single] 
\begin{figure}[b]
\centering
\begin{tikzpicture}
\draw [red, thick] (0,0) rectangle (4,3);
\draw [orange, thick,dashed] (1,1) rectangle (3,2);
\draw [->,thick] (4,1.5) -- (7,1.5);
\draw [blue, thick] (8,1.5) circle [radius=1];
\node at (2,1.5) {Tekst};
\node at (8,1.5) {$y(x)=x^2$};
\end{tikzpicture}
\end{figure}
\end{lstlisting}
pozwala narysowa? figury geometryczne przedstawione na rys. \ref{r_tikz_przyklad}. Zwró?my uwag?, ?e napis oraz wzór s? z?o?one aktualnie wykorzystywan? czcionk?, jej wielko?? jest taka sama jak w~ca?ym dokumencie.

\begin{figure}[b]
\centering
\begin{tikzpicture}
\draw [red, thick] (0,0) rectangle (4,3);
\draw [orange, thick,dashed] (1,1) rectangle (3,2);
\draw [->,thick] (4,1.5) -- (7,1.5);
\draw [blue, thick] (8,1.5) circle [radius=1];;
\node at (2,1.5) {Tekst};
\node at (8,1.5) {$y(x)=x^2$};
\end{tikzpicture}

\caption{Przyk?adowy rysunek wykonany w~j?zyku \texttt{TikZ/PGF}}
\label{r_tikz_przyklad}
\end{figure}

Przy wi?kszych rysunkach mo?na wykorzysta? programy umo?liwiaj?ce ich przygotowanie przy wykorzystaniu ?rodowiska graficznego, np. \verb+TikzEdt+ (\url{http://www.tikzedt.org/}), \verb+TpX+ (\url{http://tpx.sourceforge.net/}), \verb+ktikz+ (\url{https://www.linux-apps.com/p/1126914/}), \verb+GraTeX+ (\url{https://sourceforge.net/projects/gratex/}).

Mo?na równie? wykorzysta? starsze, klasyczne pakiety \verb+picture+, \verb+epic+, \verb+eepic+. Równie? w~tych przypadkach mo?na ,,r?cznie'' opisywa? poszczególne elementy graficzne lub skorzysta? ze ?rodowiska graficznego, np. \verb+LaTeXPiX+ (\url{http://latexpix.software.informer.com/}), które znacznie przyspiesza prac?. Inne narz?dzia, umo?liwiaj?ce opracowanie rysunków wysokiej jako?ci, to \verb+METAPOST+ oraz \verb+PSTricks+.

\section{Kolory}
Przy umieszczaniu kilku wykresów na tym samym rysunku, np. wyników eksperymentów dla ró?nych warto?ci parametrów, nale?y zastosowa? kolory ró?ni?ce si? od siebie w~znacznym stopniu, nie mo?na stosowa? kolorów podobnych, np. kilku odcieni tego samego koloru. Warto zastosowa? standardow? palet? kolorów o~nazwie \texttt{lines}, u?yt? w~pakiecie MATLAB, która zosta?a przedstawiona w~tab.~\ref{r_zestaw_kolorow}. Definicja tych kolorów w~systemie \LaTeX\ jest nast?puj?ca:
\begin{lstlisting}[style=customlatex,frame=single]
\definecolor{niebieski}{rgb}{0,0.447,0.741}
\definecolor{czerwony}{rgb}{0.85,0.325,0.098}	
\definecolor{zolty}{rgb}{0.929,0.694,0.125}		
\definecolor{fioletowy}{rgb}{0.494,0.184,0.556}	
\definecolor{zielony}{rgb}{0.466,0.674,0.188}
\definecolor{jasnoniebieski}{rgb}{0.301,0.745,0.933}
\definecolor{ciemnioczerwony}{rgb}{0.635,0.078,0.184}
\end{lstlisting}

\definecolor{niebieski}{rgb}{0,0.447,0.741}
\definecolor{czerwony}{rgb}{0.85,0.325,0.098}	
\definecolor{zolty}{rgb}{0.929,0.694,0.125}		
\definecolor{fioletowy}{rgb}{0.494,0.184,0.556}	
\definecolor{zielony}{rgb}{0.466,0.674,0.188}
\definecolor{jasnoniebieski}{rgb}{0.301,0.745,0.933}
\definecolor{ciemnioczerwony}{rgb}{0.635,0.078,0.184}

\begin{table}[h]
\caption{Paleta 7 kolorów}
\label{r_zestaw_kolorow}
	\centering
	\begin{small}
		\begin{tabular}{|p{3cm}|p{4cm}|}
			\hline
			%\multicolumn{1}{|c|}{Nazwa koloru\rule{0pt}{3.5mm}} & \multicolumn{1}{|c|}{} \\ \hline
			niebieski & \cellcolor{niebieski}\\
			czerwony & \cellcolor{czerwony}\\
			zolty & \cellcolor{zolty}\\
			fioletowy & \cellcolor{fioletowy}\\
			zielony & \cellcolor{zielony}\\
			jasnoniebieski & \cellcolor{jasnoniebieski}\\
			ciemnioczerwony & \cellcolor{ciemnioczerwony}\\
			\hline
		\end{tabular}
	\end{small}
\end{table}

\section{Funkcje statyczne}
Do wykonywania wykresów prezentuj?cych wyniki symulacji i~eksperymentów stosuje si? pakiet \verb+PGFPLOTS+ \cite{litFeuersanger2016}. Za?ó?my, ?e w~katalogu \verb+rysunki/dane_stat+ znajduje si? plik \verb+dane_fx.txt+ zawieraj?cy w~pierwszej kolumnie warto?ci argumentu $x$, natomiast w~drugiej kolumnie warto?ci funkcji $f(x)$:
\begin{lstlisting}[style=customlatex,frame=single]
  -10.0000 -808.7350
   -9.0000 -696.4791
   -8.0000 -539.7850
   -7.0000 -386.1268
   -6.0000 -291.5881
   -5.0000 -267.6436
   -4.0000 -268.9551
   -3.0000 -233.3995
   -2.0000 -137.5303
   -1.0000  -16.4788
         0   70.0000
    1.0000   94.1212
    2.0000   87.2697
    3.0000  112.8005
    4.0000  209.4449
    5.0000  357.3564
    6.0000  498.0119
    7.0000  589.6732
    8.0000  647.4150
    9.0000  730.9209
   10.0000  891.2650
\end{lstlisting}
oraz podobny plik \verb+dane_gx.txt+, definiuj?cy funkcj? $g(x)$. Aby narysowa? te funkcje stosuje si? polecenia:
\begin{lstlisting}[style=customlatex,frame=single]
\newcommand{\szer}{8cm}
\newcommand{\wys}{7cm}

\begin{figure}[t]
\centering
\begin{tikzpicture}
\begin{axis}[
	width=\szer,
	height=\wys,
	xmin=-10,xmax=10,ymin=-1000,ymax=1000,
	xlabel={$x$},
	ylabel={$f(x), \ g(x)$},
	xtick={-10,-5,0,5,10},
	ytick={-1000,-500,0,500,1000},
	legend pos=south east,
]

\definecolor{niebieski}{rgb}{0,0.447,0.741}
\definecolor{czerwony}{rgb}{0.85,0.325,0.098}	

\addplot[niebieski,thick]
	file {rysunki/dane_stat/dane_fx.txt};
\addplot[czerwony,thick,densely dashed]
	file {rysunki/dane_stat/dane_gx.txt};
\legend{$f(x)$,$g(x)$}
\end{axis}
\end{tikzpicture}
\caption{Przyk?adowy rysunek funkcji $f(x)$ i~$g(x)$ wykonany 
w~j?zyku \texttt{PGFPLOTS}}
\label{r_pgfplots_funkcje}
\end{figure}
\end{lstlisting}
Otrzymany rezultat przedstawiono na rys.~\ref{r_pgfplots_funkcje}.

Dla wykorzystanej palety kolorów ?adnie wygl?daj? rysunki o~pogrubionych liniach (styl \verb+thick+).

Istnieje mo?liwo?? ustawienia wielko?ci czcionek liczb umieszczonych: na osiach (\verb+tick label style+), w~oznaczeniach osi (\verb+label style+), w~legendzie (\verb+legend style+) oraz w~tytule rysunku (\verb+title style+). Przyk?adowa konfiguracja zmieniaj?ca wielko?? czcionek jest nast?puj?ca:
\begin{lstlisting}[style=customlatex,frame=single]
\pgfplotsset{
	tick label style={font=\tiny},
	label style={font=\footnotesize},
	legend style={font=\footnotesize},
	title style={font=\footnotesize},
	/pgf/number format/.cd, use comma, 1000 sep={}
}
\end{lstlisting}
Dodatkowo, sekwencja \verb+/pgf/number format/.cd, use comma, 1000 sep={}+ ustawia przecinek jako separator dziesi?tny (zamiast domy?lnej kropki) oraz kasuje separator, oddzielaj?cy tysi?ce od setek (domy?lenie jest to przecinek).

\newcommand{\szer}{8cm}
\newcommand{\wys}{7cm}

\begin{figure}[tb]
\centering
\begin{tikzpicture}
\begin{axis}[
	width=\szer,
	height=\wys,
	xmin=-10,xmax=10,ymin=-1000,ymax=1000,
	xlabel={$x$},
	ylabel={$f(x), \ g(x)$},
	xtick={-10,-5,0,5,10},
	ytick={-1000,-500,0,500,1000},
	legend pos=south east,
]

\definecolor{niebieski}{rgb}{0,0.447,0.741}
\definecolor{czerwony}{rgb}{0.85,0.325,0.098}	

\addplot[niebieski,thick]
	file {rysunki/dane_stat/dane_fx.txt};
\addplot[czerwony,thick,densely dashed]
	file {rysunki/dane_stat/dane_gx.txt};
\legend{$f(x)$,$g(x)$}
\end{axis}
\end{tikzpicture}
\caption{Przyk?adowy rysunek funkcji $f(x)$ i~$g(x)$ wykonany w~j?zyku \texttt{PGFPLOTS} (rysunek jest generowany przy ka?dym przetworzenia pliku ?ród?owego}
\label{r_pgfplots_funkcje}
\end{figure}

Opisany sposób implementacji rysunków jest poprawny, ale ma powa?n? wad?, poniewa? \LaTeX{}   potrzebuje do?? du?o czasu na ich przetworzenie. Okazuje si? to du?ym mankamentem szczególnie wówczas, gdy w~dokumencie znajduje si? du?o skomplikowanych rysunków. Skutecznym rozwi?zaniem jest przygotowanie rysunków i~zapis ich do plików \verb+pdf+, a~nast?pnie do??czenie ich do g?ównego dokumentu poleceniem \verb+\includegraphics+. W~katalogu \verb+rysunki/zapisz_pdf+ podano kilka przyk?adów takich rysunków. Plik ?ród?owy \verb+funkcje.tex+ ma posta?:
\lstinputlisting[style=customlatex,frame=single]{rysunki/zapisz_pdf/funkcje.tex}
Zwró?my uwag?, ?e dzi?ki zastosowaniu klasy \verb+standalone+, wygenerowany zostanie rysunek o~zadanych wymiarach (bez niepotrzebych marginesów), plik \verb+pdf+ nie b?dzie formatu A4. Nast?puj?ce polecenie 
\begin{lstlisting}[style=customlatex,frame=single]
pdflatex funkcje.tex
\end{lstlisting}
zapisuje plik \verb+funkcje.pdf+. Wygenerowany rysunek do??cza si? do dokumentu ci?giem instrukcji:
\begin{lstlisting}[style=customlatex,frame=single]
\begin{figure}[tb]
\centering
\includegraphics[scale=1]{pgfplots_pdf/funkcje}
\caption{Przyk?adowy rysunek funkcji $f(x)$ i~$g(x)$ wykonany
w~j?zyku \texttt{PGFPLOTS}}
\label{r_pgfplots_funkcje}
\end{figure}
\end{lstlisting}
Otrzymany rezultat przedstawiono na rys.~\ref{r_pgfplots_funkcje_pdf}. Oczywi?cie, rysunki \ref{r_pgfplots_funkcje} i~\ref{r_pgfplots_funkcje_pdf} s? bardzo podobne, inna jest tylko wielko?? czcionek na osiach.

Przy du?ych zbiorach danych \LaTeX{} zg?asza b??d pami?ci. Nale?y wówczas zastosowa? system sk?adu \hbox{Lua\LaTeX}.

Nie nale?y skalowa? rysunku przy wykorzystaniu argumentów polecenia \verb+\includegraphics+, gdy? zmieni to wielko?? zastosowanej czcionki. Je?eli zachodzi konieczno?? zmiany wielko?ci rysunku, nale?y zmodyfikowa? plik ?ród?owy generuj?cy rysunek.

Je?eli rysunek jest znacznie szerszy ni? szeroko?? strony (oraz gdy nie mo?emy lub nie chcemy redukowa? szeroko?ci rysunku), nale?y zastosowa? otoczenie \verb+sidewaysfigure+ z~pakietu \verb+rotating+, które dzia?a analogicznie jak otoczenie \verb+sidewaystable+.

W~dokumentacji pakietu \verb+PGFPLOTS+ omówiono sposób przygotowania rysunków trójwymiarowych \cite{litFeuersanger2016}.

\begin{figure}[ptb]
\centering
\includegraphics[scale=1]{rysunki/zapisz_pdf/funkcje}
\caption{Przyk?adowy rysunek funkcji $f(x)$ i~$g(x)$ wykonany
w~j?zyku \texttt{PGFPLOTS} i~zapisany w~pliku \texttt{funkcje.pdf}}
\label{r_pgfplots_funkcje_pdf}
\end{figure}

\section{Wyniki symulacji i~eksperymentów}
\subsection{Procesy jednowymiarowe}
Za?ó?my, ?e w~katalogu \verb+rysunki/symulacje11+ znajduje si? plik \verb+yzad.txt+ zawieraj?cy w~pierwszej kolumnie pomiary czasu $t$ (w~sekundach), natomiast w~drugiej kolumnie próbki sygna?u warto?ci zadanej $y^{\mathrm{zad}}$. Wykonano symulacje algorytmu regulacji GPC przy pi?ciu ró?nych warto?ciach parametru $\lambda$: $\num{0,1}$, $\num{0,2}$, $\num{0,5}$, $\num{1}$ i~$\num{2}$. Przebiegi sygna?u steruj?cego $u$ zapisano w~plikach \verb+u_lambda_0_1.txt+, \verb+u_lambda_0_2.txt+, \verb+u_lambda_0_5.txt+, \verb+u_lambda_1.txt+ i~\verb+u_lambda_2.txt+, natomiast przebiegi sygna?u wyj?ciowego procesu $y$ zapisano w~plikach \verb+y_lambda_0_1.txt+, \verb+y_lambda_0_2.txt+, \verb+y_lambda_0_5.txt+, \verb+y_lambda_1.txt+ i~\verb+y_lambda_2.txt+. Przygotowano plik \verb+symulacje11.tex+, umo?liwiaj?cy zapisanie rysunku do pliku \verb+symulacje11.pdf+. Znajduje si? on w~katalogu \verb+rysunki/zapisz_pdf+ i~ma nast?puj?c? posta?:
\lstinputlisting[style=customlatex,frame=single]{rysunki/zapisz_pdf/symulacje11.tex}
Na pocz?tku powy?szego pliku zostaje wczytany i~skonfigurowany pakiet \verb+siunitx+. Mi?dzy innymi, ustawiamy przecinek jako separator dziesi?tny. Liczby z~cz??ci? u?amkow? zapisujemy w~postaci \verb+\num{0.1}+. W~zale?no?ci od konfiguracji, otrzymamy $0.1$ lub $0{,}1$. Polecenie
\begin{lstlisting}[style=customlatex,frame=single]
pdflatex symulacje11.tex
\end{lstlisting}
zapisuje plik \verb+symulacje11.pdf+. Rezultat przedstawiono na rys.~\ref{r_pgfplots_symulacje11_pdf}. Rysunek do??cza si? do dokumentu instrukcj? \verb+\includegraphics+. Zwró?my uwag?, ?e do narysowania wyników symulacji dla kolejnych warto?ci parametru $\lambda$ zastosowano ró?ne kolory oraz ró?ne style linii (linia ci?g?a, linia przerywana, itd.). Umo?liwia to ?atwe rozró?nienie dokumentów na czarno-bia?ym wydruku. Przy wydruku kolorowym oraz dokumentach elektronicznych mo?na zrezygnowa? ze stosowania ró?nych stylów linii, do ich rozró?nienia wystarczaj?ce s? kolory, pod warunkiem jednak, ?e kolejne krzywe nie s? po?o?one bardzo blisko siebie.

Czasami, ze wzgl?du na ograniczon? obj?to?? dokumentu, nale?y zmniejszy? rysunki. Aby zmniejszy? obj?to?? mo?na zastosowa? u?o?enie poziome dwóch rysunków, prezentuj?cych wyniki symulacji procesu. Przygotowano plik \verb+symulacje11_wersja2.tex+, umo?liwiaj?cy zapisanie rysunku do pliku \verb+symulacje11_wersja2.pdf+. Znajduje si? on w~katalogu \verb+rysunki/zapisz_pdf+ i~ma nast?puj?c? posta?:
\lstinputlisting[style=customlatex,frame=single]{rysunki/zapisz_pdf/symulacje11_wersja2.tex}
Rezultat przedstawiono na rys.~\ref{r_pgfplots_symulacje11_wersja2_pdf}.

\begin{figure}[H]
\centering
\includegraphics[scale=1]{rysunki/zapisz_pdf/symulacje11}
%\includegraphics[scale=1]{rysunki/zapisz_pdf/symulacje11}
\caption{Przyk?adowy rysunek wyników symulacji procesu jednowymiarowego wykonany
w~j?zyku \texttt{PGFPLOTS} i~zapisany w~pliku \texttt{symulacje11.pdf}}
\label{r_pgfplots_symulacje11_pdf}
\end{figure}

\begin{figure}[H]
\centering
\includegraphics[scale=1]{rysunki/zapisz_pdf/symulacje11_wersja2}
\caption{Przyk?adowy rysunek wyników symulacji procesu jednowymiarowego wykonany
w~j?zyku \texttt{PGFPLOTS} i~zapisany w~pliku \texttt{symulacje11\_wersja2.pdf}}
\label{r_pgfplots_symulacje11_wersja2_pdf}
\end{figure}

\subsection{Procesy wielowymiarowe}
Za?ó?my, ?e w~katalogu \verb+rysunki/symulacje22+ znajduj? si? wyniki symulacji procesu o~dwóch wej?ciach i~dwóch wyj?ciach zapisane w~plikach: \verb+yzad1.txt+, \verb+yzad2.txt+, \verb+u1.txt+, \verb+u2.txt+, \verb+y1.txt+, \verb+y2.txt+. W~pierwszej kolumnie tych plików podano czas $t$ (w~sekundach), natomiast w~drugiej kolumnie warto?? odpowiedniej zmiennej. Plik \verb+symulacje22.tex+, umo?liwiaj?cy zapisanie rysunku do pliku \verb+symulacje22.pdf+ znajduje si? w~katalogu \verb+rysunki/zapisz_pdf+ i~ma nast?puj?c? posta?:
\lstinputlisting[style=customlatex,frame=single]{rysunki/zapisz_pdf/symulacje22.tex}
Rezultat przedstawiono na rys.~\ref{r_pgfplots_symulacje22_pdf}.

Aby zmniejszy? obj?to?? mo?na nieco inaczej u?o?y? 4 rysunki, prezentuj?ce wyniki symulacji procesu dwuwymiarowego. Przygotowano plik \verb+symulacje22_wersja2.tex+, umo?liwiaj?cy zapisanie rysunku do pliku \verb+symulacje22_wersja2.pdf+. Znajduje si? on w~katalogu \verb+rysunki/zapisz_pdf+ i~ma nast?puj?c? posta?:
\lstinputlisting[style=customlatex,frame=single]{rysunki/zapisz_pdf/symulacje22_wersja2.tex}
Rezultat przedstawiono na rys.~\ref{r_pgfplots_symulacje22_wersja2_pdf}.

\begin{figure}[H]
\centering
\includegraphics[scale=1]{rysunki/zapisz_pdf/symulacje22}
\caption{Przyk?adowy rysunek wyników symulacji procesu dwuwymiarowego wykonany
w~j?zyku \texttt{PGFPLOTS} i~zapisany w~pliku \texttt{symulacje22.pdf}}
\label{r_pgfplots_symulacje22_pdf}
\end{figure}

\begin{figure}[H]
\centering
\includegraphics[scale=1]{rysunki/zapisz_pdf/symulacje22_wersja2}
\caption{Przyk?adowy rysunek wyników symulacji procesu dwuwymiarowego wykonany
w~j?zyku \texttt{PGFPLOTS} i~zapisany w~pliku \texttt{symulacje22\_wersja2.pdf}}
\label{r_pgfplots_symulacje22_wersja2_pdf}
\end{figure}

\section{Zapis wielu rysunków do jednego pliku \texttt{pdf}}
Aktywacja klasy \verb+standalone+ z~opcj? \verb+tikz+ umo?liwia zapis wielu rysunków do jednego pliku \texttt{pdf}. Rozwa?my przyk?adowy plik \verb+funkcje2.tex+ z~katalogu \verb+rysunki/zapisz_pdf+:
\lstinputlisting[style=customlatex,frame=single]{rysunki/zapisz_pdf/funkcje2.tex}
Ka?dy rysunek wygenerowany przez otoczenie \verb+tikzpicture+ znajdzie si? na osobnej stronie. Co wa?ne, je?eli ka?dy rysunek b?dzie mia? inne wymiary, dzi?ki klasie \verb+standalone+ ka?da strona jest przycinana do zawarto?ci. Gotowe rysunki wstawiamy do dokumentu poleceniami (oczywi?cie w~otoczeniu \verb+figure+):
\begin{lstlisting}[style=customlatex,frame=single]
\includegraphics[page=1]{funkcje2.pdf}
\end{lstlisting}
oraz
\begin{lstlisting}[style=customlatex,frame=single]
\includegraphics[page=2]{funkcje2.pdf}
\end{lstlisting}
Opisany sposób zapisu rysunków pozwala na ograniczenie liczby plików oraz umo?liwia grupowanie tre?ci.

\section{Prosty eksport wykresów: skrypt \texttt{matlab2tikz}}
Oprócz opisanego sposobu przygotowywania rysunków z~wykorzystaniem pakietu \verb+PGFPLOTS+, mo?na wykorzysta? skrypt \texttt{matlab2tikz}, który generuje kod ?ród?owy (\verb+TikZ+) rysunku wykonanego w~programie MATLAB. Skrypt \texttt{matlab2tikz} dost?pny jest pod adresem: \url{https://www.mathworks.com/matlabcentral/fileexchange/22022-matlab2tikz-matlab2tikz}. Rozwa?my przyk?adowy plik \verb+wykresy_z_matlaba.m+ z~katalogu \verb+rysunki/matlab2tikz+:
\lstinputlisting[style=Matlab-editor]{./rysunki/matlab2tikz/wykresy_z_matlaba.m}
Wykres wstawiamy do dokumentu w~nst?puj?cy sposób:
\begin{lstlisting}[style=customlatex,frame=single]
\begin{figure}[H]
\centering
	\input{./rysunki/matlab2tikz/wykres_tex.tex}
\caption{Przyk?adowy rysunek wykonany w~MATLABie 
i~wygenerowany skryptem \texttt{matlab2tikz}}
\label{r_matlab2tikz}
\end{figure}
\end{lstlisting}
Otrzymany rezultat przedstawiono na rys. \ref{r_matlab2tikz}. Oczywi?cie, czasami konieczna jest ingerencja i~drobna modyfikacja plików wygenerowanych przez skrypt \texttt{matlab2tikz}, np. w~celu zmiany wielko?ci czcionki lub ca?ego rysunku.

Rysunek jest generowany na podstawie kodu ?ród?owego przy ka?dym przetworzeniu dokumentu przez system \LaTeX, a~wi?c przy wi?kszej liczbie rysunków celowe jest oddzielne przygotowanie poszczególnych rysunków w~plikach \verb+pdf+, a~nast?pnie ich do??czenie do dokumentu przy u?yciu polecenia \verb+\includegraphics+.

\begin{figure}[H]
\centering
	\input{./rysunki/matlab2tikz/wykres_tex.tex}
\caption{Przyk?adowy rysunek wykonany w~MATLABie i~wygenerowany skryptem \texttt{matlab2tikz}}
\label{r_matlab2tikz}
\end{figure}

Pomimo tego, ?e w~MATLAB-ie znakiem oddzielaj?cym cz??? ca?kowit? od cz??ci u?amkowej jest kropka, to w~sprawozdaniu zast?piona ona zosta?a przecinkiem. Jest to wynikiem dzia?ania jednej z linijek znajduj?cych si? w~preambule, które na sta?e konfiguruj? pakiet PGFPlots tak, aby zawsze liczby formatowa? zgodnie z polskimi standardami.

Zwró?my uwag?, ?e rysunek zapisany w~pliku ?ród?owym plik \verb+wykres_tex.tex+ jest generowany przy ka?dym przetworzeniu dokumentu przez system \LaTeX. Aby przyspieszy? dzia?anie systemu, warto osobno wygenerowa? wszystkie rysunki, a~nast?pnie wstawi? do dokumentu gotowe pliki \verb+pdf+. S?u?y do tego plik \verb+wykres_tex_standalone.tex+, umo?liwiaj?cy zapisanie rysunku do pliku \verb+wykres_tex_standalone.pdf+. Znajduje si? on w~katalogu \verb+rysunki/matlab2tikz+ i~ma nast?puj?c? posta?:
\lstinputlisting[style=customlatex,frame=single]{rysunki/matlab2tikz/wykres_tex_standalone.tex}

W~celu efektywnej pracy ze skryptem \texttt{matlab2tikz} nale?y przenie?? wszystkie potrzebne pliki do katalogu, w~którym MATLAB poszukuje wywo?ywanych funkcji. W~tym celu nale?y utworzy? katalog \verb|<MATLAB_ROOT>/toolbox/matlab2tikz| (gdzie \verb|<MATLAB_ROOT>| jest ?cie?k? do katalogu gdzie zainstalowany jest MATLAB), skopiowa? do? zawarto?? katalogu \verb|src|, a~nast?pnie doda? powy?szy katalog do listy ?cie?ek MATLAB-a (np. klikaj?c zak?adk? \verb|HOME| i~przycisk \verb|SetPath| w~MATLAB-ie).

\textbf{UWAGA:} MATLAB 2017b automatycznie dodaje do wykresów legend? (MATLAB 2017a tego nie robi). Dla zainteresowanych rozwi?zaniem tego problemu, link\newline \url{https://github.com/matlab2tikz/matlab2tikz/issues/1006}

\subsection{MATLAB i~dobór kolorów}
Uwaga: nie stosujemy starej palety kolorów pakietu MATLAB, przedstawionej w~tab.~\ref{r_zestaw_kolorow_MATLAB_historia}.

\definecolor{staryniebieski}{rgb}{0,0,1}
\definecolor{staryczerwony}{rgb}{1,0,0}	
\definecolor{staryzolty}{rgb}{1,1,0}		
\definecolor{staryfioletowy}{rgb}{1,0,1}	
\definecolor{staryzielony}{rgb}{0,1,0}
\definecolor{staryjasnoniebieski}{rgb}{0,1,1}
\definecolor{czarny}{rgb}{0,0,0}

\begin{table}[H]
\caption{Stara paleta 7 kolorów pakietu MATLAB (nie u?ywa?)}
\label{r_zestaw_kolorow_MATLAB_historia}
	\centering
	\begin{small}
		\begin{tabular}{|p{3cm}|p{4cm}|}
			\hline
			%\multicolumn{1}{|c|}{Nazwa koloru\rule{0pt}{3.5mm}} & \multicolumn{1}{|c|}{} \\ \hline
			'r' & \cellcolor{staryczerwony}\\
			'g' & \cellcolor{staryzielony}\\
			'b' & \cellcolor{staryniebieski}\\
			'c' & \cellcolor{staryjasnoniebieski}\\
			'm' & \cellcolor{staryfioletowy}\\
			'y' & \cellcolor{staryzolty}\\
			'k' & \cellcolor{czarny}\\
			\hline
		\end{tabular}
	\end{small}
\end{table}

Aktualne wersje pakietu MATLAB automatycznie stosuj? kolejne kolory dla kolejnych polece? \verb+plot+ lub \verb+stairs+ z~palety \texttt{lines}, przedstawione w~tab. \ref{r_zestaw_kolorow}. Nie musimy stosowa? ?adnych identyfikatorów kolorów. Co wa?ne, nie stosujemy identyfikatorów kolorów postaci \verb+'r'+, \verb+'g'+, \verb+'b'+, \verb+'c'+, \verb+'m'+, \verb+'y'+, \verb+'k'+. Rozwa?my plik \verb+kolory_matlab.m+ z~katalogu \verb+rysunki/matlab2tikz+:
\lstinputlisting[style=Matlab-editor]{./rysunki/matlab2tikz/kolory_matlab.m}
Powy?szy skrypt generuje dwa rysunki, przy czym na pierwszym z~nich kolejne kolory s? dobierane automatycznie, co osi?gamy nie definiuj?c ?adnych identyfikatorów kolorów, na drugim rysunku u?ywamy historycznej palety kolorów. Otrzymane rezultaty zamieszczono na rys. \ref{r_wykres_kolory1} i~rys. \ref{r_wykres_kolory2}. Kolory z~historycznej palety s? zbyt jaskrawe, szczególnie zielony i~?ó?ty. Reasumuj?c, stosujemy automatyczny przydzia? kolorów (paleta \texttt{lines}).

\begin{figure}[H]
\centering
	\input{./rysunki/matlab2tikz/wykres_kolory1.tex}
\caption{Przyk?adowy rysunek wykonany w~MATLABie i~wygenerowany skryptem \texttt{matlab2tikz}: prawid?owy dobór kolorów}
\label{r_wykres_kolory1}
\end{figure}

\begin{figure}[H]
\centering
	\input{./rysunki/matlab2tikz/wykres_kolory2.tex}
\caption{Przyk?adowy rysunek wykonany w~MATLABie i~wygenerowany skryptem \texttt{matlab2tikz}: nieprawid?owy dobór kolorów}
\label{r_wykres_kolory2}
\end{figure}

\section{Lokalizacja rysunków i~tabel}
Zgodnie z~filozofia systemu \LaTeX, wszystkie rysunki i~tabele powinni?my umieszcza? jako ,,p?ywaj?ce", a~wi?c w otoczeniu \verb+figure+ oraz \verb+table+, mo?liwe pozycje: \verb+[t]+ -- na górze strony, \verb+[b]+ -- na dole strony, \verb+[p]+ -- na stronie rysunków/tabel (mo?liwe s? równie? kombinacje tych opcji). Mo?na równie? zastosowa? opcj? \verb+[h]+ (je?eli si? da, to w~tym miejscu). Wymienione opcje dzia?aj? dobrze, pod warunkiem jednak, ?e w~dokumencie znajduje si? ,,odpowiednia'' ilo?? tekstu, wystarczaj?ca do ?adnego u?o?enia razem z~rysunkami i~tabelami. Niestety, je?eli rysunków i~tabel jest znacznie wi?cej ni? tekstu, mog? si? znajdowa? daleko od miejsca, w~którym s? omawiane. Nale?y wówczas zastosowa? opcj? \verb+[H]+ z~pakietu \verb+float+ (dok?adnie w~tym miejscu). Wad? takiego rozwi?zania jest prawdopodobie?stwo wyst?pienia pustych fragmentów stron, ale rysunki i~tabele s? dok?adnie w~tym miejscu, w~którym wska?emy. Aby unikn?? umieszczenia rysunków w~tek?cie kolejnego rozdzia?u mo?na równie? zastosowa? polecenie \verb+\FloatBarrier+ z~pakietu \verb+placeins+.


