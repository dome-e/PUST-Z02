% !TEX encoding = cp1250
\chapter{Æwiczenie laboratoryjne}

Podczas tego zadania laboratoryjnego wykorzystano:
\begin{itemize}
	\item grza³kê G1 (sygna³ steruj¹cy $U$),
	\item wentylator W1 (wartoœæ zadana $Y_{zad}$),
	\item czujnik temperatury T1 (sygna³ wyjœciowy $Y$) 
\end{itemize} 

\section{Przygotowanie do wykonania æwiczenia}
Przed rozpoczêciem pomiarów sprawdzono mo¿liwoœæ sterowania i~pomiaru w~komunikacji ze stanowiskiem. Punkt pracy grza³ki $G1$ dla zespo³u obliczony zosta³ wg. wzoru \ref{w_G1}:
\begin{equation}
	G1 = 25 + Z\%5\
\label{w_G1}
\end{equation}
gdzie Z~to numer zespo³u, zatem dla naszego zespo³u (Z02) punkt pracy wynosi:
\begin{equation}
	G1 = 25 + 2\%5 = 27
\end{equation}
Nastêpnie okreœlono wartoœæ pomiaru temperatury T1 dla obliczonego punktu pracy. W~tym celu moc wentylatora W1 ustawiono na 50\%, a moc grza³ki G1 na 27\%,  za pomoc¹ funkcji
\texttt{sendControls([1,5], [50,27])}.
Wartoœæ pomiaru temperatury odczytano korzystaj¹c z~funkcji 
\texttt{readMeasurements(1)}.
Temperatura T1 ustabilizowa³a siê na wartoœci \textbf{32,25\degree C}

 
\section{Wyznaczenie odpowiedzi skokowych procesu}
Zarejestrowano przebieg temperatury T1 dla trzech ró¿nych zmian sygna³u steruj¹cego G1 rozpoczynaj¹c z~punktu pracy (27\%) do 10\%, 35\% i~50\%.
Otrzymane przebiegi zmian przedstawiono na Rys. \ref{rys_przebiegi_T1}. 


\begin{figure}[H]
	\centering
	\includegraphics[scale=0.75]{png/lab_zad2.png}
	\caption{Odpowiedzi skokowe procesu}
	\label{rys_przebiegi_T1}
\end{figure}

Na podstawie charakterystyki Y(U) mo¿na stwierdziæ, ¿e w³aœciwoœci statyczne obiektu s¹ w przybli¿eniu liniowe.

\begin{align*}
	K_{stat}= 0,3267
\end{align*}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.75]{png/lab_zad22.png}
	\caption{Charakterystyka statyczna}
	\label{lab_zad22}
\end{figure}


\section{Przekszta³cenie odpowiedzi skokowej}

Implementacja tego zadania znajduje siê w pliku Zadanie3Lab1.m.

Przekszta³cenie odpowiedzi skokowej umieszczone jest w pliku lab\_zad3.m.
Wykorzystana metoda jest analogiczna do zadania projektowego.
Wybrana zosta³a charakterystyka dla skoku z punktu pracy do 50\%.


\begin{figure}[H]
	\centering
	\includegraphics[scale=0.75]{png/lab_zad3.png}
	\caption{OdpowiedŸ skokowa po przekszta³ceniu}
	\label{lab_zad3}
\end{figure}

Aproksymacja odpowiedzi skokowej zaimplementowana zosta³a w plikach lab_opt.m i zab3_opt.m. Optymalizacji parametrów dokonano algorytmem genetycznym (plik lab_opt.m). Zespó³ nie zd¹¿y³ jednak wygenerowaæ rysunku dla wersji aproksymowanej. 


\section{Algorytm PID}

Implementacja symulacji cyfrowego algorytmu PID znajduje siê w pliku Zad4\_PID\_lab1.m


Poni¿sze zadanie laboratoryjne realizowane by³o w inny, zimniejszy dzieñ, co spowodowa³o koniecznoœæ wyznaczenia wartoœci pomiaru temperatury w punkcie pracy na nowo. Nowy punkt pracy dla ${G1 = 27}$ to ${ T1 = 29,37 }$ {\degree C}.

Napisano  program do regulacji cyfrowego algorytmu PID. Dobór nastaw regulatora przeprowadzono metod¹ Zieglera-Nicholsa. Rozpoczêto od doboru wartoœci wzmocnienia K, przy parametrze ca³kuj¹cym Ti = inf i ró¿niczkuj¹cym Td = 0. W algorytmie uwzglêdniono ograniczenia wartoœci sterowania G1(k) (zakres od ${U_{min} = 0}$  do ${\Delta U_{max}=100}$).

Testowano odpowiedŸ uk³adu przy ró¿nych wartoœciach wzmocnienia K. 
Pocz¹tkowo ustawiono zbyt du¿¹ wartoœæ ${Y_{zad} = 50}$, co uniemo¿liwi³o analizê przebiegu wyjœcia uk³adu – wartoœæ wzrasta³a powoli, przez co pomiar zajmowa³ za du¿o czasu. Problem ten widoczny jest na wykresach Rys. {\ref{rys_lab_PID_k18}} i Rys.  {\ref{rys_lab_PID_k20_1}} . Pomiar z Rys. {\ref{rys_lab_PID_k18}} zosta³ przerwany po zauwa¿eniu nieprzewidywanego zachowania.


\begin{figure}[H]
	\centering
	\includegraphics[scale=0.22]{png/lab2/zad5_lab1_pid_k18.png}
	\caption{Przebiegi dla ${K = 18}$ i ${Y_{zad} = 50}$}
	\label{rys_lab_PID_k18}
\end{figure}


\begin{figure}[H]
	\centering
	\includegraphics[scale=0.22]{png/lab2/zad5_lab1_pid_k20_v1.png}
	\caption{Przebiegi dla ${K = 20}$ i ${Y_{zad} = 50}$}
	\label{rys_lab_PID_k20_1}
\end{figure}


Po zaobserwowaniu powy¿szego problemu i jego analizie zmieniono wartoœæ sygna³u zadanego na ${Y_{zad} = 33}$. Wyniki widoczne s¹ na wykresie Rys.  {\ref{rys_lab_PID_k20_2}}.


\begin{figure}[H]
	\centering
	\includegraphics[scale=0.22]{png/lab2/zad5_lab1_pid_k20_v2.png}
	\caption{Przebiegi dla ${K = 20}$ i ${Y_{zad} = 33}$}
	\label{rys_lab_PID_k20_2}
\end{figure}

Mimo tej zmiany, odpowiedŸ procesu nadal ros³a zbyt wolno. Po ponownej analizie algorytmu wywnioskowano, ¿e do niskiej prêdkoœci wzrastania przyczyni³ siê równie¿ niew³aœciwie dobrany parametr ${\Delta U_{max}=2}$ – ogranicza³ on bowiem szybkoœæ zmian sygna³u steruj¹cego. Po zmianie tej wartoœci na ${\Delta U_{max} = 20}$, uk³ad dzia³a³ zgodnie z za³o¿eniami (Rys. {\ref{rys_lab_PID_k20_3}}). 


\begin{figure}[H]
	\centering
	\includegraphics[scale=0.22]{png/lab2/zad5_lab1_pid_k20_v3.png}
	\caption{Przebiegi dla ${K = 20}$, ${Y_{zad} = 33}$ i zmienion¹ wartoœci¹ ${\Delta U_{max}}$}
	\label{rys_lab_PID_k20_3}
\end{figure}

Widoczne s¹ regularne oscylacje, jednak s¹ one oscylacjami gasn¹cymi. Wartoœæ wzmocnienia zosta³a wiêc zwiêkszona do ${K = 24}$. Jak widaæ na wykresie Rys. {\ref{rys_lab_PID_k24}} oscylacje nie gasn¹. Zauwa¿alny jest  nawet lekki wzrost amplitudy oscylacji. Przewidujemy, ¿e niegasn¹ce oscylacje wyst¹pi³yby przy wartoœci wzmocnienia ${K_{kr}=23}$, jednak przez problemy wystêpuj¹ce na pocz¹tku realizacji zadania nie zosta³o to sprawdzone.
Z tego powodu nie dobrano równie¿ pozosta³ych parametrów regulatora PID dla zmiennego sygna³u zadanego. 
Jeœli zespó³ mia³by wiêcej czasu, nastêpnym krokiem by³oby ustawienie nastaw regulatora wg. regu³ Zieglera-Nicholsa (Rys. {\ref{t_ZN}}). Zatem po wyznaczeniu wzmocnienia krytycznego ${K_{kr}}$, z przebiegu wartoœci sterowania odczytany zosta³by okres krytyczny ${T_{kr}}$, a wstêpne nastawy regulatora PID wynosi³yby: ${K=0,6K_{kr}}$, ${T_i= 0,5T_{kr}}$ i ${T_d=0,125K_{kr}}$. Je¿eli by³oby to konieczne, regulator zosta³by dostrojony metod¹ eksperymentaln¹.


\begin{figure}[H]
	\centering
	\includegraphics[scale=0.22]{png/lab2/zad5_lab1_pid_k24.png}
	\caption{Przebiegi dla ${K=24}$}
	\label{rys_lab_PID_k24}
\end{figure}

W wyniku opisanych wy¿ej problemów zespó³ nie zd¹¿y³ zrealizowaæ dalszej czêœci zadañ laboratoryjnych.