% !TEX encoding = cp1250
\chapter{Projekt}



\section{Sprawdzenie poprawnoœci punktu pracy}

Implementacja zadania znajduje siê w pliku \texttt{zad1\_2.m}.

Punkt pracy równy jest $U_{pp} = 0$, $Y_{pp} = 0$, co zosta³o przedstawione na wykresach \ref{zad1_u} i \ref{zad1_y}.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.75]{png/projekt/zad1_u.png}
	\caption{Wejœcie uk³adu w punkcie pracy}
	\label{zad1_u}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.75]{png/projekt/zad1_y.png}
	\caption{Wyjœcie uk³adu w punkcie pracy}
	\label{zad1_y}
\end{figure}

 
\section{Wyznaczenie odpowiedzi skokowych procesu}

Uk³ad zosta³ pobudzony sygna³ami o wartoœciach $ U = [-0,8; -0,3; 0,2; 0,6; 1,0]$.

Otrzymane zosta³y w ten sposób odpowiedzi skokowe:

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.6]{png/projekt/zad2_1.png}
	\caption{Otrzymane odpowiedzi skokowe}
	\label{zad2_1}
\end{figure}

Na wykresie  \ref{zad2_2}  widoczna jest charakterystyka statyczna obiektu.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.75]{png/projekt/zad2_2.png}
	\caption{Charakterystyka statyczna}
	\label{zad2_2}
\end{figure}

W³aœciwoœci dynamiczne oraz statyczne nie s¹ liniowe. Do charakterystyki statycznej nie mo¿e zostaæ dopasowana prosta.

\section{Algorytmy PID i DMC}

Obiekt zosta³ poddany regulacji za pomoc¹ algorytmów PID i DMC z Projektu 2.

Jakoœæ sterowania zale¿y od wartoœci $Y_{zad}$. Ró¿ni siê intensywnoœæ oscylacji oraz wartoœæ przeregulowania. Wynika to z nieliniowoœci charakterystyki statycznej.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.75]{png/projekt/zad3_pid_u.png}
	\caption{Wejœcie uk³adu - algorytm PID}
	\label{zad3_pid_u}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.75]{png/projekt/zad3_pid_y.png}
	\caption{Wyjœcie uk³adu - algorytm PID}
	\label{zad3_pid_y}
\end{figure}

WskaŸnik jakoœci wyniosi $ E = 388.88 $.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.75]{png/projekt/zad3_dmc_u.png}
	\caption{Wejœcie uk³adu - algorytm PID}
	\label{zad3_dmc_u}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.75]{png/projekt/zad3_dmc_y.png}
	\caption{Wyjœcie uk³adu - algorytm PID}
	\label{zad3_dmc_y}
\end{figure}

WskaŸnik jakoœci wyniosi $ E = 515.34 $. Jego wartoœæ jest wiêksza, ni¿ dla PID. Regulator DMC sprawdzi³ siê gorzej od pierwszego algorytmu. Wstêpuje znacznie wiêksze przeregulowanie oraz oscylacje. Dla $Y_{zad} = 4.5$ sygna³ wyjœciowy nie osi¹ga tej wartoœci. 

\section{Rozmyty algorytm PID}

Zaimplementowany zosta³ rozmyty algorytm PID dla ró¿nej iloœci regulatorów lokalnych (2, 3, 4, 5). Dla ka¿dego z regulatorów nastawy zosta³y dobrane oddzielnie za pomoc¹ optymalizacji znajduj¹cej siê w pliku \texttt{Dobieranie\_PID.m}

W wyniku optymalizacji otrzymano nastêpuj¹ce nastawy i przebiegi:
\begin{itemize}
	\item Dla dwóch regulatorów: \newline
	$K_1=-0.172946$  $K_2 = 0.191360$ \newline
	$T_i1=-1.070829$  $T_i2 = 8.028027$ \newline
	$T_d1 = -4.981247$ $T_d2 = 0.769607$\newline
	
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.25]{png/projekt/PID_rozm_reg2.png}
		\caption{Przebiegi dla rozmytego regulatora PID. Liczba regulatorów = 2 }
		\label{PID_rozm_reg2}
	\end{figure}

	WskaŸnik jakoœci regulacji $E = 795,4233$
	
	\item Dla trzech regulatorów\newline
	$K_1=-0.172946$  $K_2 = -0.018484$ $K_3= 0.191360$ \newline
	$T_i1=-2.055129$  $T_i2 = -10.214840$  $T_i3 = 8.028027$\newline
	$T_d1 = -4.981247$ $T_d2 =15.489054$ $T_d3 = 0.769607$ \newline
	
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.25]{png/projekt/PID_rozm_reg3.png}
		\caption{Przebiegi dla rozmytego regulatora PID. Liczba regulatorów = 3 }
		\label{PID_rozm_reg3}
	\end{figure}

	WskaŸnik jakoœci regulacji $E = 387,9480$

	\item Dla czterech regulatorów\newline
	$K_1=-0.172946$  $K_2 = 0.132199 $ $K_3= -0.018484 $ $K_4= 0.191360$\newline
	$T_i1=-2.055129$  $T_i2 = 3.637091 $  $T_i3 = -10.214840 $ $T_i4 = 8.028027$\newline
	$T_d1 = -4.981247$ $T_d2 =0.107170$ $T_d3 = 15.489054$ $T_i4 = 0.769607$\newline
	
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.25]{png/projekt/PID_rozm_reg4.png}
		\caption{Przebiegi dla rozmytego regulatora PID. Liczba regulatorów = 4}
		\label{PID_rozm_reg4}
	\end{figure}

	WskaŸnik jakoœci regulacji $E = 246,4657$

	\item Dla piêciu regulatorów\newline
	$K_1=-0.172946$  $K_2 = -0.027008$ $K_3= -0.018484 $ $K_4= -0.131081$ $K_5= 0.191360$\newline
	$T_i1=-2.055129$  $T_i2 = -3.995364$  $T_i3 = -10.214840 $ $T_i4 = -4.333814$ $T_i5 = 8.028027$ \newline
	$T_d1 = -4.981247$ $T_d2 =26.380217$ $T_d3 = 15.489054$ $T_i4 = -6.294312$ $T_i5 = 0.769607$ \newline
	
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.25]{png/projekt/PID_rozm_reg5.png}
		\caption{Przebiegi dla rozmytego regulatora PID. Liczba regulatorów = 5}
		\label{PID_rozm_reg5}
	\end{figure}
	WskaŸnik jakoœci regulacji $E = 1,6366e+03$

	
\end{itemize}

Jakoœæ regulacji by³a najlepsza w przypadku regulatora rozmytego z czterema regulatorami lokalnymi. Wraz ze wzrostem iloœci regulatorów lokalnych ros³a jakoœæ regulacji, jednak coraz trudniejsze stawa³o siê równie¿ odpowiednie dobranie parametrów regulatorów, przez co regulator z piêcioma regulatorami lokalnymi charakteryzuje siê najgorsz¹ jakoœci¹ regulacji.


\section{Rozmyty algorytm DMC}

Nastêpnie zaimplementowano algorytm rozmytego regulatora DMC dla ró¿nej liczby regulatorów lokalnych (2, 3, lub 4). Dla ka¿dego regulatora z inn¹ liczb¹ regulatorów lokalnych dobrano parametry oddzielnie.

Zestaw liczb $s_1, s_2, s_3....$ obliczany jest oddzielnie dla ka¿dego z regulatorów lokalnych poprzez wykorzystanie funkcji \texttt{licz\_s.m}. 

\begin{lstlisting}[style=customlatex,frame=single] 
function s=licz_s(u1, u2)
	y_temp = wynik_y(u1);
	Y=zeros(1,200);
	U=zeros(1,200);
	Y(1:15)=y_temp;
	U(1:10)=u1;
	U(11:200)=u2;
	
	for k=7:1:200
		Y(k)=symulacja_obiektu2y_p3(U(k-5),U(k-6),Y(k-1),Y(k-2));
	end
	for j=1:1:190
		s(j)=(Y(j+10)-y_temp)/(u2-u1);
	end
	
end
\end{lstlisting}


Przyjmuje ona jako parametry wartoœci $u1$ i $u2$. 
Parametr $u1$ przekazywany jest nastêpnie funkcji \texttt{wynik\_y}, która przeprowadza symulacjê dla wartoœci sterowania $u = u1$ i zwraca ostatni¹ wartoœæ odpowiedzi skokow¹ $y\_temp$.

\begin{lstlisting}[style=customlatex,frame=single] 
function y = wynik_y(u)
	U_sym(1:200)=u;
	Y_sym(1:200)=0;
	for k=7:200
		Y_sym(k)=symulacja_obiektu2y_p3(U_sym(k-5),U_sym(k-6),
		Y_sym(k-1),Y_sym(k-2));
	end
	y=Y_sym(200);
end
\end{lstlisting}
Wartoœæ ta zosta³a nastêpnie wykorzystana do przeprowadzenia kolejnej symulacji, dla skoku wartoœci sterowania z $u1$ do $u2$.
Otrzymana odpowiedŸ skokowa zosta³a przeskalowana, w celu wyliczenia zestawu liczb $s_1, s_2, s_3....$. Przekszta³cenie to przebieg³o zgodnie ze wzorem \ref{w_Si_pro}, gdzie $Y_{pp}=y\_temp$. Zamiast $Y_i$ u¿yto $Y_{i+10}$, poniewa¿ zmiana wartoœci sterowania z $u1$ na $u2$ wyst¹pi³a w chwili k = 10.

\begin{equation}
	S_i = \frac{Y_{i+10}  - Y_{pp}}{\Delta U}, i = 1, 2, 3,  ...
	\label{w_Si_pro}
\end{equation}

Po otrzymaniu przekszta³conych odpowiedzi skokowych dla ka¿dego z regulatorów lokalnych przyst¹piono do liczenia macierzy $M, M^P i K$ . Wartoœci horyzontów dynamiki $D$ zosta³y dobrane oddzielnie dla ka¿dego z regulatorów. Dla u³atwienia przyjêto, ¿e $N = N_u = D$. $\lambda = 1$ w przypadku ka¿dego regulatora.

Wspó³czynniki przynale¿noœci (wagi) ka¿dego z regulatorów obliczone zosta³y w funkcji \texttt{rozklad}. Wykorzystana zosta³a funkcja przynale¿noœci dzwonowej \texttt{gbellmf}.

Regulator przetestowano dla kilku skoków wartoœci zadanej $y_{zad}$.
Przebiegi dla ró¿nej iloœci regulatorów lokalnych, przy wartoœci parametru $\lambda = 1$ przedstawiono poni¿ej.


\begin{figure}[H]
	\centering
	\includegraphics[scale=0.7]{png/projekt/DMC_rozm_lambda1_reg2_u.png}
		\caption{Wartoœæ sterowania $u$ dla rozmytego regulatora DMC przy $\lambda = 1$. Liczba regulatorów = 2 }
	\label{DMC_rozm_lambda1_reg2_u}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.7]{png/projekt/DMC_rozm_lambda1_reg2_y.png}
	\caption{Sygna³ wyjœciowy $y$ dla rozmytego regulatora DMC przy $\lambda = 1$. Liczba regulatorów = 2 }
	\label{DMC_rozm_lambda1_reg2_y}
\end{figure}

Dla dwóch regulatorów lokalnych wskaŸnik jakoœci regulacji wyniós³ $E=221,4943$.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.7]{png/projekt/DMC_rozm_lambda1_reg3_u.png}
	\caption{Wartoœæ sterowania $u$ dla rozmytego regulatora DMC przy $\lambda = 1$. Liczba regulatorów = 3 }
	\label{DMC_rozm_lambda1_reg3_u}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.7]{png/projekt/DMC_rozm_lambda1_reg3_y.png}
	\caption{Sygna³ wyjœciowy $y$ dla rozmytego regulatora DMC przy $\lambda = 1$. Liczba regulatorów = 3}
	\label{DMC_rozm_lambda1_reg3_y}
\end{figure}

Dla trzech regulatorów lokalnych wskaŸnik jakoœci regulacji wyniós³ $E=210,3070$.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.7]{png/projekt/DMC_rozm_lambda1_reg4_u.png}
	\caption{Wartoœæ sterowania $u$ dla rozmytego regulatora DMC przy $\lambda = 1$. Liczba regulatorów = 4 }
	\label{DMC_rozm_lambda1_reg4_u}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.7]{png/projekt/DMC_rozm_lambda1_reg4_y.png}
	\caption{Sygna³ wyjœciowy $y$ dla rozmytego regulatora DMC przy $\lambda = 1$. Liczba regulatorów = 4}
	\label{DMC_rozm_lambda1_reg4_y}
\end{figure}

Dla czterech regulatorów lokalnych wskaŸnik jakoœci regulacji wyniós³ $E= 191,2044$

Nastêpnie dobrano wartoœci parametrów $\lambda$ dla ka¿dego z regulatorów metod¹ eksperymentaln¹. 

Otrzymano nastêpuj¹ce nastawy i przebiegi
\begin{itemize}
	\item Dla dwóch regulatorów: \newline
	$\lambda_1= 9.3$  $\lambda_2= 21.2$ \newline
	
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.7]{png/projekt/dmc_rozm2_u.png}
		\caption{Wartoœæ sterowania $u$ dla rozmytego regulatora DMC. Liczba regulatorów = 2 }
		\label{dmc_rozm2_u}
	\end{figure}

	\begin{figure}[H]
	\centering
	\includegraphics[scale=0.7]{png/projekt/dmc_rozm2_y.png}
	\caption{Sygna³ wyjœciowy $y$ dla rozmytego regulatora DMC. Liczba regulatorów = 2 }
	\label{dmc_rozm2_y}
\end{figure}
	
	WskaŸnik jakoœci regulacji $E = 103,9025$
	
	\item Dla trzech regulatorów\newline
	$\lambda_1= 4.1$  $\lambda_2= 9.5$  $\lambda_3 = 17$\newline

	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.7]{png/projekt/dmc_rozm3_u.png}
		\caption{Wartoœæ sterowania $u$ dla rozmytego regulatora DMC. Liczba regulatorów = 3 }
		\label{dmc_rozm3_u}
	\end{figure}
	
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.7]{png/projekt/dmc_rozm3_y.png}
		\caption{Sygna³ wyjœciowy $y$ dla rozmytego regulatora DMC. Liczba regulatorów = 3 }
		\label{dmc_rozm3_y}
	\end{figure}

	WskaŸnik jakoœci regulacji $E =  109,2374$
	
	\item Dla czterech regulatorów\newline
	$\lambda_1= 2.1$  $\lambda_2= 2.2$  $\lambda_3 = 7.2 $ $\lambda_4 = 1.1$ \newline
	
	
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.7]{png/projekt/dmc_rozm4_u.png}
		\caption{Wartoœæ sterowania $u$ dla rozmytego regulatora DMC. Liczba regulatorów = 4}
		\label{dmc_rozm4_u}
	\end{figure}
	
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.7]{png/projekt/dmc_rozm4_y.png}
		\caption{Sygna³ wyjœciowy $y$ dla rozmytego regulatora DMC. Liczba regulatorów = 4 }
		\label{dmc_rozm4_y}
	\end{figure}
	
	WskaŸnik jakoœci regulacji $E =  136,2552$
	

Wraz ze wzrostem iloœci regulatorów lokalnych w regulatorze rozmytym, ros³a jakoœæ regulacji. WskaŸnik jakoœci regulacji $E$ by³ coraz mniejszy, zauwa¿alne by³y równie¿ coraz mniejsze oscylacje.


\end{itemize}
